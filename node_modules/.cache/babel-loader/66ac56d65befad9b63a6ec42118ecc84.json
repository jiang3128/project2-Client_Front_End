{"ast":null,"code":"import { response } from \"express\";\nexport const Action = Object.freeze({\n  LoadMemories: 'LoadMemories',\n  FinishAddingMemory: 'FinishAddingMemory',\n  EnterEditMode: 'EnterEditMode',\n  LeaveEditMode: 'LeaveEditMode',\n  FinishSavingMemory: 'FinishSavingMemory',\n  FinishDeletingMemory: 'FinishDeletingMemory'\n}); //cant add new key Enum\n\nexport function LoadMemories(memories) {\n  return {\n    type: Action.LoadMemories,\n    payload: memories\n  };\n}\nexport function finishAddingMemory(memory) {\n  return {\n    type: Action.FinishAddingMemory,\n    payload: memory\n  };\n}\nexport function finishSavingMemory(memory) {\n  return {\n    type: Action.FinishSavingMemory,\n    payload: memory\n  };\n}\nexport function finishDeletingMemory(memory) {\n  return {\n    type: Action.FinishDeletingMemory,\n    payload: memory\n  };\n}\nexport function enterEditMode(memory) {\n  return {\n    type: Action.EnterEditMode,\n    payload: memory\n  };\n}\nexport function leaveEditMode(memory) {\n  return {\n    type: Action.LeaveEditMode,\n    payload: memory\n  };\n}\n\nfunction checkForErrors(response) {\n  if (!response.ok) {\n    throw Error(`${response.status}: ${response.statusText}`);\n  }\n\n  return response;\n}\n\nconst host = 'https://zhuj3128.duckdns.org:8442';\nexport function loadDay(month, day) {\n  return dispatch => {\n    fetch(`${host}/memories/${month}/${day}`).then(checkForErrors).then(response => response.json()).then(data => {\n      if (data.ok) {\n        dispatch(LoadMemories(data.memories));\n      }\n    }).catch(e => console.error(e));\n  };\n}\nexport function startAddingMemory(year, month, day) {\n  const memory = {\n    year,\n    month,\n    day,\n    message: ''\n  };\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(memory)\n  };\n  return dispatch => {\n    fetch(`${host}/memories`, options).then(checkForErrors).then(response => response.json()).then(data => {\n      if (data.ok) {\n        memory.id = data.id;\n        dispatch(finishAddingMemory(memory));\n      }\n    }).catch(e => console.error(e));\n  };\n}\nexport function startSavingMemory(memory) {\n  const options = {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(memory)\n  };\n  return dispatch => {\n    fetch(`${host}/memories/${memory.id}`, options).then(checkForErrors).then(response => response.json()).then(data => {\n      if (data.ok) {\n        dispatch(finishSavingMemory(memory));\n      }\n    }).catch(e => console.error(e));\n  };\n}\nexport function startDeletingMemory(memory) {\n  const options = {\n    method: 'DELETE' // headers:{\n    //     'Content-Type':'application/json',\n    // },\n    // body:JSON.stringify(memory),\n\n  };\n  return dispatch => {\n    fetch(`${host}/memories/${memory.id}`, options).then(checkForErrors).then(response => response.json()).then(data => {\n      if (data.ok) {\n        dispatch(finishDeletingMemory(memory));\n      }\n    }).catch(e => console.error(e));\n  };\n}","map":{"version":3,"sources":["C:/UWEC/CS268/Project2/CS268_WebProject2/project2/src/action.js"],"names":["response","Action","Object","freeze","LoadMemories","FinishAddingMemory","EnterEditMode","LeaveEditMode","FinishSavingMemory","FinishDeletingMemory","memories","type","payload","finishAddingMemory","memory","finishSavingMemory","finishDeletingMemory","enterEditMode","leaveEditMode","checkForErrors","ok","Error","status","statusText","host","loadDay","month","day","dispatch","fetch","then","json","data","catch","e","console","error","startAddingMemory","year","message","options","method","headers","body","JSON","stringify","id","startSavingMemory","startDeletingMemory"],"mappings":"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","sourcesContent":["import { response } from \"express\";\r\n\r\nexport const Action = Object.freeze({\r\n    LoadMemories: 'LoadMemories',\r\n    FinishAddingMemory:'FinishAddingMemory',\r\n    EnterEditMode:'EnterEditMode',\r\n    LeaveEditMode:'LeaveEditMode',\r\n    FinishSavingMemory: 'FinishSavingMemory',\r\n    FinishDeletingMemory: 'FinishDeletingMemory',\r\n\r\n});//cant add new key Enum\r\n\r\nexport function LoadMemories(memories){\r\n    return {\r\n        type:Action.LoadMemories,\r\n        payload: memories,\r\n    }\r\n}\r\nexport function finishAddingMemory(memory){\r\n    return {\r\n        type:Action.FinishAddingMemory,\r\n        payload: memory,\r\n    }\r\n}\r\nexport function finishSavingMemory(memory){\r\n    return {\r\n        type:Action.FinishSavingMemory,\r\n        payload: memory,\r\n    }\r\n}\r\nexport function finishDeletingMemory(memory){\r\n    return {\r\n        type:Action.FinishDeletingMemory,\r\n        payload: memory,\r\n    }\r\n}\r\nexport function enterEditMode(memory){\r\n    return {\r\n        type:Action.EnterEditMode,\r\n        payload: memory,\r\n    }\r\n}\r\nexport function leaveEditMode(memory){\r\n    return {\r\n        type:Action.LeaveEditMode,\r\n        payload: memory,\r\n    }\r\n}\r\n\r\nfunction checkForErrors(response){\r\n    if(!response.ok){\r\n        throw Error(`${response.status}: ${response.statusText}`);\r\n    }\r\n    return response;\r\n}\r\n\r\nconst host = 'https://zhuj3128.duckdns.org:8442';\r\n\r\n\r\nexport function loadDay(month,day){\r\n    return dispatch => {\r\n        fetch(`${host}/memories/${month}/${day}`)\r\n        .then(checkForErrors)\r\n        .then(response=>response.json())\r\n        .then(data=>{\r\n            if(data.ok){\r\n               dispatch(LoadMemories(data.memories));\r\n            }\r\n        })\r\n        .catch(e=>console.error(e));\r\n    }\r\n}\r\nexport function startAddingMemory(year,month,day){\r\n    const memory = {year,month,day,message:''};\r\n    const options = {\r\n        method:'POST',\r\n        headers:{\r\n            'Content-Type':'application/json',\r\n        },\r\n        body:JSON.stringify(memory),\r\n    }\r\n    return dispatch => {\r\n        fetch(`${host}/memories`,options)\r\n        .then(checkForErrors)\r\n        .then(response=>response.json())\r\n        .then(data=>{\r\n            if(data.ok){\r\n               memory.id = data.id;\r\n               dispatch(finishAddingMemory(memory));\r\n            }\r\n        })\r\n        .catch(e=>console.error(e));\r\n    }\r\n}\r\nexport function startSavingMemory(memory){\r\n    const options = {\r\n        method:'PATCH',\r\n        headers:{\r\n            'Content-Type':'application/json',\r\n        },\r\n        body:JSON.stringify(memory),\r\n    }\r\n    return dispatch => {\r\n        fetch(`${host}/memories/${memory.id}`,options)\r\n        .then(checkForErrors)\r\n        .then(response=>response.json())\r\n        .then(data=>{\r\n            if(data.ok){\r\n               dispatch(finishSavingMemory(memory));\r\n            }\r\n        })\r\n        .catch(e=>console.error(e));\r\n    };\r\n}\r\nexport function startDeletingMemory(memory){\r\n    const options = {\r\n        method:'DELETE',\r\n        // headers:{\r\n        //     'Content-Type':'application/json',\r\n        // },\r\n        // body:JSON.stringify(memory),\r\n    }\r\n    return dispatch => {\r\n        fetch(`${host}/memories/${memory.id}`,options)\r\n        .then(checkForErrors)\r\n        .then(response=>response.json())\r\n        .then(data=>{\r\n            if(data.ok){\r\n               dispatch(finishDeletingMemory(memory));\r\n            }\r\n        })\r\n        .catch(e=>console.error(e));\r\n    };\r\n}"]},"metadata":{},"sourceType":"module"}